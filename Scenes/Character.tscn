[gd_scene load_steps=14 format=3 uid="uid://cjmre3cjowgo6"]

[ext_resource type="Script" uid="uid://dxmerq0pcku17" path="res://Scripts/Jugador/player.gd" id="1_7ig0a"]
[ext_resource type="Texture2D" uid="uid://b6kauwett0agh" path="res://icon.svg" id="2_677pu"]
[ext_resource type="Script" uid="uid://ds1vj1qx7bbci" path="res://Scripts/Jugador/Estados Basicos Jugador.gd" id="2_jo2ib"]
[ext_resource type="Script" uid="uid://c76pnj52yjy3k" path="res://Scripts/Jugador/Estado Dash.gd" id="4_v7dgu"]
[ext_resource type="Shader" uid="uid://bq45bc81yb4sr" path="res://Shader/Linea.tres" id="4_vdqda"]
[ext_resource type="Texture2D" uid="uid://bukd0lwp0dg5a" path="res://Sprites/Flecha.png" id="5_xloa1"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_xloa1"]
size = Vector2(30, 43)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_677pu"]
size = Vector2(20, 40)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_v7dgu"]

[sub_resource type="Gradient" id="Gradient_4b18b"]
interpolation_mode = 1
offsets = PackedFloat32Array(0, 0.6)

[sub_resource type="FastNoiseLite" id="FastNoiseLite_peemv"]
frequency = 0.0165
fractal_type = 3
fractal_octaves = 1
fractal_ping_pong_strength = 0.495

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_omicx"]
bump_strength = 21.0
color_ramp = SubResource("Gradient_4b18b")
noise = SubResource("FastNoiseLite_peemv")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_omicx"]
shader = ExtResource("4_vdqda")
shader_parameter/Texture2DParameter = ExtResource("5_xloa1")
shader_parameter/Texture2DParameter2 = SubResource("NoiseTexture2D_omicx")

[node name="Jugador" type="CharacterBody2D"]
slide_on_ceiling = false
wall_min_slide_angle = 3.14159
safe_margin = 2.0
script = ExtResource("1_7ig0a")
gravityMultiplyWall = 0.1

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, 0.5)
shape = SubResource("RectangleShape2D_xloa1")
debug_color = Color(0, 0.6, 0.701961, 1)

[node name="Icon" type="Sprite2D" parent="."]
position = Vector2(0, -1.90735e-06)
scale = Vector2(0.25, 0.35)
texture = ExtResource("2_677pu")

[node name="Camera2D" type="Camera2D" parent="."]
zoom = Vector2(1.3, 1.3)

[node name="Central State Machine" type="Node" parent="."]
script = ExtResource("2_jo2ib")
PhysicsStates = Dictionary[String, NodePath]({
"Caminar": NodePath("."),
"Colgado Pared": NodePath("."),
"Correr": NodePath("."),
"Dash": NodePath("../State Dash/State Dash"),
"Deslizarse Pared": NodePath("."),
"Muerte": NodePath("."),
"Quieto": NodePath(".")
})
metadata/_custom_type_script = "uid://ci1ayib00djei"

[node name="Shape Pared" type="ShapeCast2D" parent="."]
shape = SubResource("RectangleShape2D_677pu")
target_position = Vector2(10, 0)

[node name="Shape Piso" type="ShapeCast2D" parent="."]
shape = SubResource("RectangleShape2D_v7dgu")
target_position = Vector2(0, 20)

[node name="Cooldown Bullet Time" type="Timer" parent="."]
one_shot = true

[node name="State Dash" type="Node2D" parent="."]

[node name="Line2D" type="Line2D" parent="State Dash"]
texture_filter = 1
material = SubResource("ShaderMaterial_omicx")
points = PackedVector2Array(0, 0, 144, 0)
width = 20.405
texture_mode = 1

[node name="State Dash" type="Node" parent="State Dash"]
script = ExtResource("4_v7dgu")
PhysicsStates = Dictionary[String, NodePath]({
"Dash": NodePath("."),
"Quieto": NodePath("../../Central State Machine")
})
metadata/_custom_type_script = "uid://ci1ayib00djei"

[connection signal="timeout" from="Cooldown Bullet Time" to="Central State Machine" method="_on_bullet_time_timeout"]
